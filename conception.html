<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nextmux ‚Äì Dossier de Conception</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Mono:wght@300;400;500&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --ink: #0f0f0f;
    --paper: #f7f4ef;
    --accent: #c84b31;
    --accent2: #2563a8;
    --muted: #6b6860;
    --border: #d9d4cc;
    --card: #ffffff;
    --code-bg: #1a1a2e;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--paper);
    color: var(--ink);
    line-height: 1.7;
  }

  /* Cover Page */
  .cover {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 80px 10%;
    background: var(--ink);
    color: var(--paper);
    position: relative;
    overflow: hidden;
  }

  .cover::before {
    content: '';
    position: absolute;
    top: -200px; right: -200px;
    width: 600px; height: 600px;
    border-radius: 50%;
    border: 120px solid var(--accent);
    opacity: 0.15;
  }

  .cover::after {
    content: '';
    position: absolute;
    bottom: -100px; left: 30%;
    width: 400px; height: 400px;
    border: 2px solid var(--paper);
    opacity: 0.07;
    transform: rotate(45deg);
  }

  .cover-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.75rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 32px;
  }

  .cover h1 {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(3rem, 8vw, 7rem);
    line-height: 1;
    margin-bottom: 16px;
  }

  .cover h1 span { color: var(--accent); font-style: italic; }

  .cover-sub {
    font-size: 1.25rem;
    color: rgba(247,244,239,0.6);
    max-width: 600px;
    margin-bottom: 60px;
  }

  .cover-meta {
    display: flex;
    gap: 48px;
    flex-wrap: wrap;
  }

  .meta-item label {
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: rgba(247,244,239,0.4);
    display: block;
    margin-bottom: 4px;
  }

  .meta-item span { font-weight: 500; font-size: 0.95rem; }

  /* TOC */
  .toc {
    padding: 80px 10%;
    background: var(--card);
    border-bottom: 1px solid var(--border);
  }

  .toc h2 {
    font-family: 'DM Serif Display', serif;
    font-size: 2rem;
    margin-bottom: 32px;
  }

  .toc-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 16px;
  }

  .toc-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    border: 1px solid var(--border);
    border-radius: 8px;
    text-decoration: none;
    color: var(--ink);
    transition: all 0.2s;
  }

  .toc-item:hover { border-color: var(--accent); background: #fff8f7; }

  .toc-num {
    font-family: 'DM Mono', monospace;
    font-size: 0.7rem;
    color: var(--accent);
    font-weight: 500;
  }

  /* Sections */
  .section {
    padding: 80px 10%;
    border-bottom: 1px solid var(--border);
  }

  .section:nth-child(even) { background: var(--card); }

  .section-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 8px;
  }

  .section h2 {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(1.8rem, 3vw, 2.5rem);
    margin-bottom: 8px;
  }

  .section-intro {
    color: var(--muted);
    max-width: 700px;
    margin-bottom: 48px;
    font-size: 1.05rem;
  }

  /* Diagram container */
  .diagram-box {
    background: white;
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 32px;
    overflow-x: auto;
    margin-bottom: 32px;
    box-shadow: 0 2px 16px rgba(0,0,0,0.04);
  }

  .diagram-box .mermaid {
    display: flex;
    justify-content: center;
  }

  /* Code blocks */
  .code-block {
    background: var(--code-bg);
    color: #a8d8ea;
    font-family: 'DM Mono', monospace;
    font-size: 0.82rem;
    line-height: 1.8;
    border-radius: 12px;
    padding: 32px;
    overflow-x: auto;
    white-space: pre;
    margin-bottom: 24px;
  }

  .code-block .kw { color: #f7768e; }
  .code-block .tbl { color: #7dcfff; }
  .code-block .cmt { color: #565f89; }
  .code-block .str { color: #9ece6a; }

  /* Info cards */
  .info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
  }

  .info-card {
    padding: 24px;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: white;
  }

  .info-card h4 {
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .info-card p { font-size: 0.875rem; color: var(--muted); }

  .badge {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 600;
    font-family: 'DM Mono', monospace;
  }

  .badge-red { background: #fef2f0; color: var(--accent); }
  .badge-blue { background: #eff6ff; color: var(--accent2); }
  .badge-green { background: #f0fdf4; color: #16a34a; }

  /* Relational schema table */
  .rel-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.875rem;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid var(--border);
    margin-bottom: 20px;
  }

  .rel-table th {
    background: var(--ink);
    color: var(--paper);
    padding: 10px 16px;
    text-align: left;
    font-family: 'DM Mono', monospace;
    font-weight: 500;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
  }

  .rel-table td {
    padding: 10px 16px;
    border-top: 1px solid var(--border);
    vertical-align: top;
  }

  .rel-table tr:hover td { background: #fafafa; }

  .pk { color: var(--accent); font-weight: 600; font-family: 'DM Mono', monospace; font-size: 0.8rem; }
  .fk { color: var(--accent2); font-family: 'DM Mono', monospace; font-size: 0.8rem; }
  .field { font-family: 'DM Mono', monospace; font-size: 0.8rem; }
  .type { color: var(--muted); font-size: 0.8rem; }

  /* Print */
  @media print {
    .cover { page-break-after: always; min-height: auto; padding: 60px; }
    .section { page-break-inside: avoid; }
  }

  .divider {
    width: 48px; height: 3px;
    background: var(--accent);
    margin: 24px 0;
    border-radius: 2px;
  }
</style>
</head>
<body>

<!-- COVER -->
<div class="cover">
  <div class="cover-label">Dossier de Conception ¬∑ Workshop Full-Stack</div>
  <h1>Next<span>mux</span><br>Mini ERP</h1>
  <p class="cover-sub">Gestion de Projets & Finance ‚Äî Conception UML, Mod√©lisation des donn√©es et Architecture technique</p>
  <div class="cover-meta">
    <div class="meta-item">
      <label>Entreprise</label>
      <span>Nextmux PME</span>
    </div>
    <div class="meta-item">
      <label>Stack</label>
      <span>PHP / MySQL / HTML CSS JS</span>
    </div>
    <div class="meta-item">
      <label>Type</label>
      <span>Application Web Interne</span>
    </div>
    <div class="meta-item">
      <label>Version</label>
      <span>1.0 ‚Äî 2025</span>
    </div>
  </div>
</div>

<!-- TOC -->
<div class="toc">
  <h2>Sommaire</h2>
  <div class="toc-grid">
    <a href="#usecase" class="toc-item">
      <span class="toc-num">01</span>
      <span>Diagramme de cas d'utilisation</span>
    </a>
    <a href="#classes" class="toc-item">
      <span class="toc-num">02</span>
      <span>Diagramme de classes</span>
    </a>
    <a href="#mcd" class="toc-item">
      <span class="toc-num">03</span>
      <span>MCD ‚Äî Mod√®le Conceptuel</span>
    </a>
    <a href="#schema" class="toc-item">
      <span class="toc-num">04</span>
      <span>Sch√©ma relationnel</span>
    </a>
    <a href="#rapport" class="toc-item">
      <span class="toc-num">05</span>
      <span>Rapport technique</span>
    </a>
  </div>
</div>

<!-- 01 - USE CASE -->
<div id="usecase" class="section">
  <div class="section-label">01 ‚Äî Analyse fonctionnelle</div>
  <h2>Diagramme de cas d'utilisation</h2>
  <div class="divider"></div>
  <p class="section-intro">Le syst√®me Nextmux ERP implique deux acteurs principaux : le <strong>Gestionnaire</strong> (acc√®s complet) et le <strong>Comptable</strong> (acc√®s financier limit√©). Le diagramme ci-dessous pr√©sente l'ensemble des interactions possibles.</p>

  <div class="diagram-box">
    <div class="mermaid">
graph LR
  style G fill:#c84b31,color:#fff,rx:50
  style C fill:#2563a8,color:#fff,rx:50

  G((Gestionnaire))
  C((Comptable))

  subgraph ERP["üñ•Ô∏è  Nextmux Mini ERP"]
    direction TB

    subgraph Clients["üë• Gestion Clients"]
      UC1[Cr√©er un client]
      UC2[Modifier un client]
      UC3[Supprimer un client]
      UC4[Lister les clients]
    end

    subgraph Projets["üìÅ Gestion Projets"]
      UC5[Cr√©er un projet]
      UC6[Modifier un projet]
      UC7[Supprimer un projet]
      UC8[Consulter un projet]
    end

    subgraph Taches["‚úÖ Gestion T√¢ches"]
      UC9[Cr√©er une t√¢che]
      UC10[Modifier une t√¢che]
      UC11[Changer le statut]
      UC12[Supprimer une t√¢che]
    end

    subgraph Finance["üí∞ Module Finance"]
      UC13[Cr√©er une facture]
      UC14[Modifier une facture]
      UC15[Enregistrer un paiement]
      UC16[Enregistrer une d√©pense]
      UC17[Tableau de bord financier]
    end
  end

  G --> UC1 & UC2 & UC3 & UC4
  G --> UC5 & UC6 & UC7 & UC8
  G --> UC9 & UC10 & UC11 & UC12
  G --> UC13 & UC14 & UC15 & UC16 & UC17
  C --> UC13 & UC14 & UC15 & UC16 & UC17
    </div>
  </div>

  <div class="info-grid">
    <div class="info-card">
      <h4><span class="badge badge-red">Gestionnaire</span></h4>
      <p>Acc√®s complet √† tous les modules. G√®re les clients, projets, t√¢ches et la finance. Profil op√©rationnel principal de l'application.</p>
    </div>
    <div class="info-card">
      <h4><span class="badge badge-blue">Comptable</span></h4>
      <p>Acc√®s restreint au module finance : cr√©ation de factures, saisie des paiements et d√©penses, consultation du tableau de bord.</p>
    </div>
    <div class="info-card">
      <h4><span class="badge badge-green">Syst√®me</span></h4>
      <p>Calculs automatiques : statut de facture (brouillon / envoy√©e / pay√©e), solde financier, suivi du reste √† payer par projet.</p>
    </div>
  </div>
</div>

<!-- 02 - CLASS DIAGRAM -->
<div id="classes" class="section">
  <div class="section-label">02 ‚Äî Conception orient√©e objet</div>
  <h2>Diagramme de classes</h2>
  <div class="divider"></div>
  <p class="section-intro">Le diagramme de classes pr√©sente les entit√©s m√©tier, leurs attributs, leurs m√©thodes et leurs relations. Il constitue le fondement de l'architecture logicielle.</p>

  <div class="diagram-box">
    <div class="mermaid">
classDiagram
  direction TB

  class Client {
    +int id
    +string nom
    +string email
    +string telephone
    +string adresse
    +string ville
    +date createdAt
    +getProjets() Projet[]
    +getFactures() Facture[]
  }

  class Projet {
    +int id
    +string titre
    +string description
    +float budget
    +string statut
    +date dateDebut
    +date dateFin
    +int clientId
    +getTaches() Tache[]
    +getFactures() Facture[]
    +getMontantFacture() float
    +getTauxAvancement() float
  }

  class Tache {
    +int id
    +string titre
    +string description
    +string statut
    +string priorite
    +date dateEcheance
    +int projetId
    +marquerTerminee() void
    +estEnRetard() bool
  }

  class Facture {
    +int id
    +string numero
    +float montantHT
    +float tva
    +float montantTTC
    +string statut
    +date dateEmission
    +date dateEcheance
    +int projetId
    +getPaiements() Paiement[]
    +getMontantPaye() float
    +getReste() float
    +calculerStatut() string
  }

  class Paiement {
    +int id
    +float montant
    +date datePaiement
    +string modePaiement
    +string reference
    +int factureId
  }

  class Depense {
    +int id
    +string libelle
    +float montant
    +string categorie
    +date date
    +string justificatif
    +int projetId
  }

  Client "1" --> "0..*" Projet : poss√®de
  Projet "1" --> "0..*" Tache : contient
  Projet "1" --> "0..*" Facture : g√©n√®re
  Projet "1" --> "0..*" Depense : engendre
  Facture "1" --> "0..*" Paiement : re√ßoit
    </div>
  </div>
</div>

<!-- 03 - MCD -->
<div id="mcd" class="section">
  <div class="section-label">03 ‚Äî Mod√©lisation conceptuelle</div>
  <h2>MCD ‚Äî Mod√®le Conceptuel de Donn√©es</h2>
  <div class="divider"></div>
  <p class="section-intro">Le MCD pr√©sente les entit√©s, leurs attributs et les associations entre elles avec leurs cardinalit√©s, sans encore d√©tailler l'impl√©mentation relationnelle.</p>

  <div class="diagram-box">
    <div class="mermaid">
erDiagram
  CLIENT {
    int id PK
    string nom
    string email
    string telephone
    string adresse
    string ville
  }

  PROJET {
    int id PK
    string titre
    string description
    decimal budget
    string statut
    date dateDebut
    date dateFin
  }

  TACHE {
    int id PK
    string titre
    string description
    string statut
    string priorite
    date dateEcheance
  }

  FACTURE {
    int id PK
    string numero
    decimal montantHT
    decimal tva
    decimal montantTTC
    string statut
    date dateEmission
    date dateEcheance
  }

  PAIEMENT {
    int id PK
    decimal montant
    date datePaiement
    string modePaiement
    string reference
  }

  DEPENSE {
    int id PK
    string libelle
    decimal montant
    string categorie
    date date
    string justificatif
  }

  CLIENT ||--o{ PROJET : "passe commande"
  PROJET ||--o{ TACHE : "se d√©compose en"
  PROJET ||--o{ FACTURE : "est factur√© par"
  PROJET ||--o{ DEPENSE : "g√©n√®re"
  FACTURE ||--o{ PAIEMENT : "est r√©gl√©e par"
    </div>
  </div>

  <div class="info-grid">
    <div class="info-card">
      <h4>üìê Cardinalit√©s cl√©s</h4>
      <p>Un CLIENT peut avoir 0 ou N projets. Un PROJET appartient √† exactement 1 client. Une FACTURE ne concerne qu'1 projet mais un projet peut avoir plusieurs factures (facturation √©chelonn√©e).</p>
    </div>
    <div class="info-card">
      <h4>üîó Association DEPENSE</h4>
      <p>Une d√©pense peut √™tre rattach√©e √† un projet (0,1) pour permettre le calcul de rentabilit√© par projet, ou rester une d√©pense g√©n√©rale de l'entreprise.</p>
    </div>
    <div class="info-card">
      <h4>üí° R√®gle de gestion</h4>
      <p>Le statut d'une FACTURE est calcul√© automatiquement : <em>brouillon ‚Üí envoy√©e ‚Üí partiellement pay√©e ‚Üí pay√©e</em> selon les paiements enregistr√©s.</p>
    </div>
  </div>
</div>

<!-- 04 - RELATIONAL SCHEMA -->
<div id="schema" class="section">
  <div class="section-label">04 ‚Äî Impl√©mentation physique</div>
  <h2>Sch√©ma relationnel final</h2>
  <div class="divider"></div>
  <p class="section-intro">Le sch√©ma relationnel est le passage du MCD vers la base de donn√©es MySQL. Les cl√©s primaires (PK) et √©trang√®res (FK) sont explicitement d√©finies.</p>

  <!-- clients -->
  <h3 style="margin-bottom:12px; font-family:'DM Mono',monospace; font-size:0.9rem; color:var(--accent2);">‚ñ∏ clients</h3>
  <table class="rel-table">
    <thead><tr><th>Colonne</th><th>Type</th><th>Contrainte</th><th>Description</th></tr></thead>
    <tbody>
      <tr><td class="pk">id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-red">PK AUTO_INCREMENT</span></td><td>Identifiant unique</td></tr>
      <tr><td class="field">nom</td><td class="type">VARCHAR(150)</td><td>NOT NULL</td><td>Raison sociale ou nom</td></tr>
      <tr><td class="field">email</td><td class="type">VARCHAR(200)</td><td>NOT NULL UNIQUE</td><td>Email principal</td></tr>
      <tr><td class="field">telephone</td><td class="type">VARCHAR(20)</td><td>NULL</td><td>Num√©ro de t√©l√©phone</td></tr>
      <tr><td class="field">adresse</td><td class="type">TEXT</td><td>NULL</td><td>Adresse postale</td></tr>
      <tr><td class="field">ville</td><td class="type">VARCHAR(100)</td><td>NULL</td><td>Ville</td></tr>
      <tr><td class="field">created_at</td><td class="type">TIMESTAMP</td><td>DEFAULT NOW()</td><td>Date de cr√©ation</td></tr>
    </tbody>
  </table>

  <!-- projets -->
  <h3 style="margin:24px 0 12px; font-family:'DM Mono',monospace; font-size:0.9rem; color:var(--accent2);">‚ñ∏ projets</h3>
  <table class="rel-table">
    <thead><tr><th>Colonne</th><th>Type</th><th>Contrainte</th><th>Description</th></tr></thead>
    <tbody>
      <tr><td class="pk">id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-red">PK AUTO_INCREMENT</span></td><td>Identifiant unique</td></tr>
      <tr><td class="fk">client_id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-blue">FK ‚Üí clients.id</span></td><td>Client associ√©</td></tr>
      <tr><td class="field">titre</td><td class="type">VARCHAR(200)</td><td>NOT NULL</td><td>Nom du projet</td></tr>
      <tr><td class="field">description</td><td class="type">TEXT</td><td>NULL</td><td>Description d√©taill√©e</td></tr>
      <tr><td class="field">budget</td><td class="type">DECIMAL(12,2)</td><td>DEFAULT 0</td><td>Budget pr√©visionnel</td></tr>
      <tr><td class="field">statut</td><td class="type">ENUM</td><td>'en_cours','termine','suspendu','prospect'</td><td>√âtat du projet</td></tr>
      <tr><td class="field">date_debut</td><td class="type">DATE</td><td>NULL</td><td>Date de d√©marrage</td></tr>
      <tr><td class="field">date_fin</td><td class="type">DATE</td><td>NULL</td><td>Date de livraison pr√©vue</td></tr>
      <tr><td class="field">created_at</td><td class="type">TIMESTAMP</td><td>DEFAULT NOW()</td><td>Date de cr√©ation</td></tr>
    </tbody>
  </table>

  <!-- taches -->
  <h3 style="margin:24px 0 12px; font-family:'DM Mono',monospace; font-size:0.9rem; color:var(--accent2);">‚ñ∏ taches</h3>
  <table class="rel-table">
    <thead><tr><th>Colonne</th><th>Type</th><th>Contrainte</th><th>Description</th></tr></thead>
    <tbody>
      <tr><td class="pk">id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-red">PK AUTO_INCREMENT</span></td><td></td></tr>
      <tr><td class="fk">projet_id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-blue">FK ‚Üí projets.id</span></td><td>Projet parent</td></tr>
      <tr><td class="field">titre</td><td class="type">VARCHAR(200)</td><td>NOT NULL</td><td>Intitul√© de la t√¢che</td></tr>
      <tr><td class="field">description</td><td class="type">TEXT</td><td>NULL</td><td></td></tr>
      <tr><td class="field">statut</td><td class="type">ENUM</td><td>'a_faire','en_cours','termine'</td><td>Avancement</td></tr>
      <tr><td class="field">priorite</td><td class="type">ENUM</td><td>'basse','normale','haute','critique'</td><td>Niveau de priorit√©</td></tr>
      <tr><td class="field">date_echeance</td><td class="type">DATE</td><td>NULL</td><td>Deadline</td></tr>
      <tr><td class="field">created_at</td><td class="type">TIMESTAMP</td><td>DEFAULT NOW()</td><td></td></tr>
    </tbody>
  </table>

  <!-- factures -->
  <h3 style="margin:24px 0 12px; font-family:'DM Mono',monospace; font-size:0.9rem; color:var(--accent2);">‚ñ∏ factures</h3>
  <table class="rel-table">
    <thead><tr><th>Colonne</th><th>Type</th><th>Contrainte</th><th>Description</th></tr></thead>
    <tbody>
      <tr><td class="pk">id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-red">PK AUTO_INCREMENT</span></td><td></td></tr>
      <tr><td class="fk">projet_id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-blue">FK ‚Üí projets.id</span></td><td>Projet factur√©</td></tr>
      <tr><td class="field">numero</td><td class="type">VARCHAR(30)</td><td>NOT NULL UNIQUE</td><td>Ex: FAC-2025-001</td></tr>
      <tr><td class="field">montant_ht</td><td class="type">DECIMAL(12,2)</td><td>NOT NULL</td><td>Montant hors taxes</td></tr>
      <tr><td class="field">tva</td><td class="type">DECIMAL(5,2)</td><td>DEFAULT 20.00</td><td>Taux TVA en %</td></tr>
      <tr><td class="field">montant_ttc</td><td class="type">DECIMAL(12,2)</td><td>NOT NULL</td><td>Calcul√© : HT √ó (1 + TVA/100)</td></tr>
      <tr><td class="field">statut</td><td class="type">ENUM</td><td>'brouillon','envoyee','partiellement_payee','payee'</td><td></td></tr>
      <tr><td class="field">date_emission</td><td class="type">DATE</td><td>NOT NULL</td><td></td></tr>
      <tr><td class="field">date_echeance</td><td class="type">DATE</td><td>NULL</td><td></td></tr>
      <tr><td class="field">notes</td><td class="type">TEXT</td><td>NULL</td><td>Mentions l√©gales / commentaires</td></tr>
      <tr><td class="field">created_at</td><td class="type">TIMESTAMP</td><td>DEFAULT NOW()</td><td></td></tr>
    </tbody>
  </table>

  <!-- paiements -->
  <h3 style="margin:24px 0 12px; font-family:'DM Mono',monospace; font-size:0.9rem; color:var(--accent2);">‚ñ∏ paiements</h3>
  <table class="rel-table">
    <thead><tr><th>Colonne</th><th>Type</th><th>Contrainte</th><th>Description</th></tr></thead>
    <tbody>
      <tr><td class="pk">id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-red">PK AUTO_INCREMENT</span></td><td></td></tr>
      <tr><td class="fk">facture_id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-blue">FK ‚Üí factures.id</span></td><td>Facture concern√©e</td></tr>
      <tr><td class="field">montant</td><td class="type">DECIMAL(12,2)</td><td>NOT NULL</td><td>Montant encaiss√©</td></tr>
      <tr><td class="field">date_paiement</td><td class="type">DATE</td><td>NOT NULL</td><td></td></tr>
      <tr><td class="field">mode_paiement</td><td class="type">ENUM</td><td>'virement','cheque','especes','carte','autre'</td><td></td></tr>
      <tr><td class="field">reference</td><td class="type">VARCHAR(100)</td><td>NULL</td><td>R√©f√©rence bancaire</td></tr>
      <tr><td class="field">created_at</td><td class="type">TIMESTAMP</td><td>DEFAULT NOW()</td><td></td></tr>
    </tbody>
  </table>

  <!-- depenses -->
  <h3 style="margin:24px 0 12px; font-family:'DM Mono',monospace; font-size:0.9rem; color:var(--accent2);">‚ñ∏ depenses</h3>
  <table class="rel-table">
    <thead><tr><th>Colonne</th><th>Type</th><th>Contrainte</th><th>Description</th></tr></thead>
    <tbody>
      <tr><td class="pk">id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-red">PK AUTO_INCREMENT</span></td><td></td></tr>
      <tr><td class="fk">projet_id</td><td class="type">INT UNSIGNED</td><td><span class="badge badge-blue">FK ‚Üí projets.id (nullable)</span></td><td>Projet li√© (optionnel)</td></tr>
      <tr><td class="field">libelle</td><td class="type">VARCHAR(200)</td><td>NOT NULL</td><td>Description de la d√©pense</td></tr>
      <tr><td class="field">montant</td><td class="type">DECIMAL(12,2)</td><td>NOT NULL</td><td></td></tr>
      <tr><td class="field">categorie</td><td class="type">ENUM</td><td>'materiel','logiciel','prestataire','transport','autre'</td><td></td></tr>
      <tr><td class="field">date</td><td class="type">DATE</td><td>NOT NULL</td><td></td></tr>
      <tr><td class="field">justificatif</td><td class="type">VARCHAR(255)</td><td>NULL</td><td>Chemin vers fichier joint</td></tr>
      <tr><td class="field">created_at</td><td class="type">TIMESTAMP</td><td>DEFAULT NOW()</td><td></td></tr>
    </tbody>
  </table>
</div>

<!-- 05 - RAPPORT -->
<div id="rapport" class="section">
  <div class="section-label">05 ‚Äî Rapport technique</div>
  <h2>Architecture & Choix techniques</h2>
  <div class="divider"></div>

  <div class="info-grid" style="margin-bottom:40px;">
    <div class="info-card">
      <h4>üèóÔ∏è Architecture MVC</h4>
      <p>L'application suit un pattern MVC all√©g√©. Les pages PHP jouent le r√¥le de contr√¥leurs. La couche <code>includes/db.php</code> centralise l'acc√®s MySQL via PDO.</p>
    </div>
    <div class="info-card">
      <h4>üîí S√©curit√©</h4>
      <p>PDO avec requ√™tes pr√©par√©es pour pr√©venir l'injection SQL. Validation serveur sur chaque POST. √âchappement HTML (<code>htmlspecialchars</code>) en sortie.</p>
    </div>
    <div class="info-card">
      <h4>üìä Module Finance</h4>
      <p>Calculs en SQL avec <code>SUM()</code> et <code>LEFT JOIN</code> pour agr√©ger : total factur√©, total encaiss√©, total d√©penses, r√©sultat net par p√©riode.</p>
    </div>
    <div class="info-card">
      <h4>üé® Interface</h4>
      <p>HTML/CSS/JS vanilla. Composants r√©utilisables via <code>includes/header.php</code> et <code>footer.php</code>. Design system coh√©rent avec variables CSS.</p>
    </div>
    <div class="info-card">
      <h4>üìÇ Structure</h4>
      <p><code>includes/</code> DB + layout. Un fichier PHP par module (clients, projets, taches, factures, paiements, depenses). <code>assets/</code> pour CSS et JS.</p>
    </div>
    <div class="info-card">
      <h4>üöÄ Perspectives</h4>
      <p>Export PDF des factures, authentification multi-r√¥le, notifications d'√©ch√©ances, API REST + frontend React, application mobile.</p>
    </div>
  </div>

  <p style="color:var(--muted); font-size:0.9rem; text-align:center; padding:24px 0; border-top:1px solid var(--border);">
    Nextmux Mini ERP ¬∑ Dossier de conception v1.0 ¬∑ Workshop Full-Stack PHP/MySQL
  </p>
</div>

<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'default',
    themeVariables: {
      primaryColor: '#f7f4ef',
      primaryTextColor: '#0f0f0f',
      primaryBorderColor: '#d9d4cc',
      lineColor: '#0f0f0f',
      secondaryColor: '#eff6ff',
      tertiaryColor: '#fef2f0',
      fontSize: '14px'
    },
    flowchart: { curve: 'basis', padding: 20 },
    classDiagram: { diagramPadding: 20 }
  });
</script>
</body>
</html>
